\begin{flashcard}{
%
\setlength{\heightlimit}{___BOXES_HEIGHT___\cardinnerheight}%
%
\fcolorbox{red}{yellow}{%
\parbox{\cardinnerwidth}{%
  \fcolorbox{red}{yellow}{%
  \parbox[t][___BOXES_HEIGHT___\cardinnerheight][c]{0.4\cardinnerwidth}{%
    \centering
    \fontsize{80}{80}\selectfont ___KANJI___ \\[4pt]
    \fontsize{12}{14}\selectfont ___STROKES___; ___RADICAL___ \fontsize{10}{12}\selectfont ___RADICAL_MEANING___ \\[2pt]
%drawing diagram, if stroke count >= 12
___KAKIKATA1___
  }%
  }%
  \setbox0=\hbox{%
  \fcolorbox{red}{yellow}{%
  \parbox[t][\height][t]{0.4\cardinnerwidth}{%
    \fontsize{13}{12}\selectfont
    \begin{enumerate}[leftmargin=20pt,itemsep=1pt,parsep=2pt,topsep=2pt,partopsep=2pt,font=\normalfont\normalsize]
      %up to 6 compounds like '      \item ...'
___COMPOUNDS___
    \end{enumerate}%
  }%
  }%
  }%
  \myheight=\ht0 \advance\myheight by \dp0%
  \ifthenelse{\myheight > \heightlimit}{%
  \GenericWarning{}{error, content too big, \the\myheight, max: \the\heightlimit}%
  \box0%
  }{%
  \box0%
  }%
  \fcolorbox{red}{yellow}{%
  \parbox[t][___BOXES_HEIGHT___\cardinnerheight][c]{0.18\cardinnerwidth}{%
    \centering
___SIMILAR_KANJIS___
  }%
  }%
%drawing diagram, if  stroke count < 12
___KAKIKATA2___

}%
}%

%front end
}
\centering
\setbox0=\hbox{
\parbox{0.95\cardinnerwidth}{
\vspace{5pt}
\setstretch{0.8}
\fontsize{10}{10}\selectfont
___ON_READINGS___%
___KUN_READINGS___%
\fontsize{10}{12}\selectfont ___MEANINGS___ \\[-3pt]
\rule[1pt]{0.95\cardinnerwidth}{0.5pt}
\fontsize{10}{12}\selectfont
\begin{enumerate}[leftmargin=13pt,itemsep=1pt,parsep=2pt,topsep=2pt,partopsep=2pt,font=\normalfont\small]
  %up to 6 compound meanings like '    \item [hiragana] [translation]'
___COMPOUND_TRANSLATIONS___
\end{enumerate}
}
}
\myheight=\ht0 \advance\myheight by \dp0
\ifthenelse{\myheight > \cardinnerheight}{
\GenericWarning{}{error, content too big, \the\myheight, max: \the\cardinnerheight}
\box0
}{
\box0
}
\end{flashcard}

